I"Q<p>The Swift project is introducing <a href="https://swift.org/download">new downloadable Swift toolchain images</a> for Windows!  These images contain development components needed to build and run Swift code on Windows.</p>

<p>For over a year now, there has been a significant endeavour to port Swift to Windows in conjunction with the developer community at swift.org.  The Windows support is now at a point where early adopters can start using Swift to build real experiences on this platform.</p>

<h2 id="bringing-swift-to-windows">Bringing Swift to Windows</h2>

<p>Porting Swift to Windows is not about simply porting the compiler, but rather ensuring that the full ecosystem is available on the platform.  This includes the compiler, the standard library, and the core libraries (dispatch, Foundation, XCTest).  These libraries are part of what enables developers to write powerful applications with ease and without having to worry about many of the details of the underlying system.  There are many technical details in the story of bringing Swift to a usable state on Windows, and if you are interested in them, I would recommend checking out my <a href="https://www.youtube.com/watch?v=Zjlxa1NIfJc">talk on the topic</a> from the LLVM Developer Conference.</p>

<p>With these core libraries and the flexible interoperability of Swift with C, it is possible to develop applications on Windows purely in Swift while taking advantage of the existing corpus of libraries on the Windows platforms.</p>

<h2 id="example-application">Example Application</h2>

<p>This <a href="https://github.com/compnerd/swift-win32/blob/ed4993f7cbb284a83ee77fcecdc2570cf24355e4/Examples/Calculator/Calculator.swift">demo calculator</a> is written entirely in Swift, with code seamlessly flipping between the application code written in Swift and the system libraries:</p>

<p><img src="https://swift.org/assets/images/windows-blog/calculator.gif" alt="Calculator app written in Swift running on Windows" /></p>

<p>This project was built using:</p>

<ol>
  <li>
    <p>The Swift toolchain on Windows</p>
  </li>
  <li>
    <p>An installation of Visual Studio 2019 which delivers the other needed pieces in the form of CMake, Ninja, and the Windows SDK</p>
  </li>
</ol>

<p>Although the demo application is built with CMake, Swift Package Manager support on Windows is coming along.  It will soon be possible to get the application building using <code class="language-plaintext highlighter-rouge">swift build</code> without needing CMake or Ninja.</p>

<p>Here you can see stepping through the application using <code class="language-plaintext highlighter-rouge">lldb</code>:</p>

<p><img src="https://swift.org/assets/images/windows-blog/lldb.png" alt="LLDB console debugging Swift application on Windows" /></p>

<h2 id="cross-platform-applications">Cross-Platform Applications</h2>

<p>Early adopters like <a href="https://readdle.com/">Readdle</a> are experimenting with cross-platform applications written in Swift, easily bringing many of the existing Swift libraries to Windows to support their applications.</p>

<p>I had been working with Alexander at Readdle about his team’s work, and he sent me this note:</p>

<blockquote>
  <p><em>We at Readdle started experimenting with Swift on Windows more than a year ago, in Q2 of 2019. By that time we already released Spark for Android which uses Swift to share core code with iOS/macOS, and the opportunity to extend to one more platform was really tempting.</em></p>

  <p><em>Despite some functionality being unready as of yet, Swift on Windows turned out to be fully satisfying our needs. In fact, some third party C/C++ dependencies gave us more headaches than Swift did itself. All business logic of Spark is located in a separate Core module. A pack of modules, actually, but we refer to them as Core. This allows us to use any UI framework on the target platform: AppKit on macOS, UIKit on iOS, native UI Toolkit on Android. So, basically, we had to port Spark Core on Windows. After all initial concepts were proved, it was mostly routine day-to-day work to bring it alive on Windows.</em></p>

  <p><em>What we have now:</em></p>

  <ul>
    <li><em>9 Swift modules (255 739 SLOC, 2 133 source files)</em></li>
    <li><em>3 third party swift modules</em></li>
    <li><em>1452 tests (powered by XCTest)</em></li>
    <li><em>Windows-based CI to keep all tests green</em></li>
    <li><em>Heterogenous build system (partially CMake, partially custom scripts)</em></li>
  </ul>

  <p><em>As a good example, pure Swift modules like CryptoSwift and OAuthSwift almost worked right out of the box. We did trivial imports adjustment, excluded a few AppKit/UIKit references and voilà!</em></p>

  <p><em>Another challenge was to decide how to implement the user interface. After extensive discourse we ended up with Electron as the front-end part of future Spark for Windows. That meant we not only needed to be able to build Spark Core on Windows but also use it as a loadable addon for Node.js.</em></p>

  <p><em>Node.js addon in pure Swift? That appeared to be surprisingly easy. Swift perfectly imports N-API headers. We still need three lines of C code plus one small C header to define addon entry point, but all logic is in Swift. Due to the crossplatform nature of Node.js, we were able to use macOS as a development platform with Xcode as IDE, and then use the agility of CMake to build the same code on Windows.</em></p>

  <p><em>Since the first day we started, Swift on Windows did a giant step forward in terms of platform support and stability. I’d say, if you are thinking about extending your existing application codebase to platforms other than macOS/iOS – you absolutely can do it with Swift now, or, at least, soon. If you are maintaining a small Swift library – you could easily add Windows support already!</em></p>

  <p>— Alexander Smarus; Product Engineering Lead at Spark Team, Readdle Inc</p>
</blockquote>

<p>More details are available on <a href="https://sparkmailapp.com/blog/swift-windows">Readdle’s blog</a>.</p>

<p>Adding support for Windows to Swift is the beginning of a journey.  The current support sets the first milestone where the language is usable.  There is yet another even broader part of the ecosystem like lldb and the Swift Package Manager which still need more work to be as complete in their support for this different platform.</p>

<h2 id="getting-started-and-getting-involved">Getting Started and Getting Involved!</h2>

<p>The <a href="https://swift.org/getting-started/">Getting Started</a> section has been updated with new information about using Swift on Windows!  For the early adopters who are getting started and finding issues, please report them to the <a href="https://bugs.swift.org">Swift Bug Tracker</a>.</p>

<p>There are many opportunities for those interested in helping push Swift on Windows forward.  One of the things that makes Swift easy to use is libraries: publishing new libraries and packages for Swift on Windows or porting existing ones is another way to get involved and help make working with Swift an ever greater delight.</p>

<p>For the ones interested in working on core tooling, there is plenty of work to be done to improve the debugger and to improve the Windows support in the Swift Package Manager.  We invite you to check out the <a href="https://bugs.swift.org">Swift Bug Tracker</a> for the current issues and to send patches to the GitHub repositories.  There is also a new section on the Swift forums to <a href="https://forums.swift.org/c/development/windows/67">discuss the development of Swift on Windows</a>.  There the community can discuss issues or you can introduce yourself and let others know what area of the tooling you are focusing on.  This is the perfect opportunity to become involved in the project and help it grow into a strong, vibrant, cross-platform ecosystem.  We cannot wait to see what exciting things you build with Swift!</p>
:ET